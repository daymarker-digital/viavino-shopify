{%- liquid

  assign section_name = 'pop-up'
  assign section_classes = section_name | append: " modal fade js--pop-up"
  assign section_id = 'shopify-section-' | append: section_name

  assign button_title = section.settings.button_title | default: ''
  assign colour_theme = section.settings.colour_theme
  assign cookie_duration = section.settings.cookie_duration
  assign delay = section.settings.delay
  assign heading = section.settings.heading | default: ''
  assign heading_font_family = section.settings.heading_font_family
  assign message = section.settings.message | default: ''
  assign modal_id = section_name | append: section.id
  assign subheading = section.settings.subheading | default: ''

-%}

{{ 'section-pop-up.css' | asset_url | stylesheet_tag }}

{%- style -%}
  #{{ modal_id }} {
    background: rgba(var(--theme-colour-{{ colour_theme }}), 1);
  }
{%- endstyle -%}

<div
  class="{{ section_classes }}"
  id="{{ modal_id }}"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  data-colour-theme="{{ colour_theme }}"
  data-cookie-duration="{{ cookie_duration }}"
  data-delay="{{ delay }}"
>

<div class="modal-dialog">
  <div class="modal-content">

    <div class="inverted-corner-box inverted-corner-box--background-{{ background }} inverted-corner-box--border-{{ text_colour }}">
      <div class="inverted-corner-box__content">

        <div class="{{ section_name }}__main">

          {% if heading != blank %}
            <h2 class="{{ section_name }}__heading">{{ heading }}</h2>
          {% endif %}

          {% if message != blank %}
            <div class="{{ section_name }}__message">{{ message }}</div>
          {% endif %}

          {% if subheading != blank %}
            <strong class="{{ section_name }}__subheading">{{ subheading }}</strong>
          {% endif %}

        </div>

      </div>
    </div>

  </div>
</div>

{% schema %}
{
  "name": "Pop Up",
  "tag": "section",
  "class": "section section--pop-up pop-up",
  "settings": [
    {
      "content": "Settings",
      "type": "header"
    },
    {
      "label": "Colour Theme",
      "type": "select",
      "options": [
        { "label": "Rosa", "value": "rosa" },
        { "label": "Rosso", "value": "rosso" },
        { "label": "Off Black", "value": "off-black" },
        { "label": "Off White", "value": "off-white" }
      ],
      "default": "off-white",
      "id": "colour_theme"
    },
    {
      "label": "Delay",
      "info": "Length of time (in milliseconds) before pop-up is shown.",
      "type": "range",
      "min": 3000,
      "max": 8000,
      "step": 250,
      "default": 4000,
      "id": "delay"
    },
    {
      "label": "Cookie Duration",
      "info": "Length of time (in days) before cookie expires and user is re-prompted. Expiry date is assigned per browser and per device.",
      "type": "range",
      "min": 30,
      "max": 150,
      "step": 5,
      "default": 30,
      "id": "cookie_duration"
    },
    {
      "content": "Content",
      "type": "header"
    },
    {
      "label": "Heading",
      "type": "text",
      "id": "heading"
    },
    {
      "label": "Heading Font Family",
      "type": "select",
      "options": [
        { "label": "Clarendon Wide Slab", "value": "clarendon-wide-slab" },
        { "label": "Novecento Sans", "value": "novecento-sans" }
      ],
      "default": "clarendon-wide-slab",
      "id": "heading_font_family"
    },
    {
      "label": "Message",
      "type": "richtext",
      "id": "message"
    },
    {
      "label": "Button",
      "type": "text",
      "default": "Submit",
      "id": "button_title"
    },
    {
      "label": "Subheading",
      "type": "richtext",
      "id": "subheading"
    }
  ],
  "presets": [
    {
      "name": "Pop Up"
    }
  ]
}
{% endschema %}
