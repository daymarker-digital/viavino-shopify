{%- liquid

  assign section_name = 'newsletter-popup'
  assign section_classes = section_name
  assign section_id = 'shopify-section-' | append: section_name

  assign aos_id = section_id | append: '--aos'
  assign aos_delay = 250
  assign aos_delay_increment = 250

  assign heading = section.settings.heading | default: ''
  assign subscription_consent = section.settings.subscription_consent | default: ''
  assign modal_id = section_name

-%}

<div
  class="{{ section_name }}__modal modal fade"
  id="{{ modal_id }}"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
>
  <div class="modal-dialog">
    <div class="modal-content">

      <button
        class="modal-button button button--close"
        type="button"
        data-bs-toggle="modal"
        data-bs-target="#{{ modal_id }}"
        aria-label="Close"
      >{% render 'svg', type: 'icon.close' %}</button>

      <div class="modal-main">

        <div class="inverted-corner-box inverted-corner-box--background-off-black inverted-corner-box--border-off-white">
          <div class="inverted-corner-box__content">

            <div class="{{ section_name }}__main">
              <div class="{{ section_name }}__branding">{% render 'svg', type: 'brand.logo' %}</div>
              {% render 'form-newsletter-signup', classes: 'newsletter-popup__form', heading: heading %}
              {% if subscription_consent != blank %}
                <div class="{{ section_name }}__subscription-consent body-copy--primary body-copy--xxs">{{ subscription_consent }}</div>
              {% endif %}
            </div>

          </div>
        </div>

      </div>

    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter Popup",
  "tag": "section",
  "class": "section section--newsletter-popup newsletter-popup",
  "settings": [
    {
      "content": "Content",
      "type": "header"
    },
    {
      "label": "Heading",
      "type": "text",
      "default": "Join our mailing list",
      "id": "heading"
    },
    {
      "label": "Subscription Consent",
      "type": "richtext",
      "default": "<p>By clicking below to submit this form, you acknowledge that the information you provide will be processed in accordance with our Privacy Policy.</p>",
      "id": "subscription_consent"
    }
  ]
}
{% endschema %}
